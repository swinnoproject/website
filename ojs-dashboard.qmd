---
format:
    dashboard:
        scrolling: true
title: Innovations commercialized 1970-2021
jupyter: python3

---

```{ojs}
// | output: false

dbfile = FileAttachment("SWINNO.UDIT.sqlite3").sqlite()
// dbfile = SQLiteDatabaseClient.open(FileAttachment("https://zenodo.org/api/records/10602309/files/SWINNO.UDIT.sqlite3/content").url())

innovation = dbfile.sql`select id, name_sv, prod_code, year from innovation`
```

# {.sidebar}

```{ojs}
viewof year1 = Inputs.number(
  [1970, 2020],
  {value: 2000, step: 1, label: "YoC1"}
)

viewof year2 = Inputs.number(
  [1970, 2020],
  {value: 2020, step: 1, label: "YoC2"}
)

md`${year1} - ${year2}`

innovations = dbfile.query(`select id, name_sv, prod_code, year from innovation where ${year1} <= year and ${year2} >= year`)
trend = dbfile.query(`select year, count(*) as count from innovation where ${year1} <= year and ${year2} >= year group by year`)


```


# Timeline
<!-- This Comment  is integral to the formatting.-->

## Row {height=130px}

```{ojs}
ninns = dbfile.query(`select count(*) as c from innovation where ${year1} <= year and ${year2} >= year`)

html`<div align="center">Innovations<br> <font size="7">${ninns[0]['c']}</font><div>`
```

```{ojs}
narts = dbfile.query(`select count(*) as c  from article where ${year1} <= year and ${year2} >= year`)

html`<div align="center">Articles<br> <font size="7">${narts[0]['c']}</font><div>`

```

```{ojs}
nents = dbfile.query(`select  count(distinct entity_id) as c from innovation_entity as ie join innovation as i on ie.innovation_id == i.id where ${year1} <= year and ${year2} >= year`)

html`<div align="center">Entities<br> <font size="7">${nents[0]['c']}</font><div>`

```



## Row {height=400px}

```{ojs}

Plot.line(trend,
      {x: "year", y: "count"},
      { stroke: "black" },

).plot({y: {grid: true, zero: true }})

```


## Row {height=400px}


```{ojs}
Inputs.table(trend)
```


## Row {height=3%}

::: {.card  style="font-size: 50%;"}

More visualisations coming soon, data is availabie [here](https://www.lusem.lu.se/economic-history/databases/swinno)

:::
